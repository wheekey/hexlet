                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Предисловие

Приветствую Вам, о ветераны битв с байт-кодом. В этом задании Вам предстоит столкнуться уже с более сложной генерацией байт-кода для не линейной программы (т.е. с "бранчами" и условными операторами).

Задание

Java Код, который Вам предстоит преобразить в байткод:

public class Math {

    public static int min(int a, int b) {
        if (a < b)
            return a;
        else
            return b;
    }

    public static int min(int a, int b, int c) {
        if (a < b && a < c) return a;
        if (b < c) return b;
        return c;
    }

}
Как обычно весь костяк уже реализован за Вас. Обратите внимание что методы статические, а это значит то в качестве первой локальной переменной в массиве локальных переменных (по индексу 0) не будет располагаться указатель this!

Детали решения

Не смотря на похожесть задания, есть некоторые новые элементы, которые Вам необходимо знать для его успешного решения. В частности в Вашем генерируемом байткоде нужно будет создавать метки. Для того что бы сгенерировать метку нужно создать экземпляр класса Label. Это уже сделано в коде за Вас:

final Label elseLabel = new Label();
Там где потребуется две метки (или больше):

final Label elseLabel = new Label();
final Label elseLabel2 = new Label();
Во втором методе задачу можно решить с использованием двух меток, однако Вы вольны создавать большее их число самостоятельно, если потребуется.

Для того что бы добавить созданную метку в какое либо конкретное место байт-кода, необходимо лишь воспользоваться методом класса MethodVisitor - visitLabel. Например вот так:

mv.visitLabel(elseLabel);
Так же, из ранее не встречавшегося Вам понадобиться метод visitJumpInsn (все того же класса MethodVisitor), для генерации условных инструкций, на пример:

mv.visitJumpInsn(Opcodes.IF_ICMPLE, elseLabel);
Данный код добавляет инструкцию IF_ICMPLE с меткой "elseLabel".